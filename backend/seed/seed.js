import mongoose from "mongoose";
import dotenv from "dotenv";
import bcrypt from "bcryptjs";
import User from "../models/Users.js";
import Publicite from "../models/Publicite.js";
import Thematique from "../models/Thematique.js";
import Categorie from "../models/Categorie.js";
import Produit from "../models/Produits.js";

dotenv.config();

const hashPassword = async (plainPassword) => {
  const salt = await bcrypt.genSalt(10);
  return bcrypt.hash(plainPassword, salt);
};

const seedDatabase = async () => {
  try {
    await mongoose.connect(process.env.MONGODB_URI);
    console.log("âœ… ConnectÃ© Ã  MongoDB Atlas");

    // Vider les collections
    await Publicite.deleteMany();
    await Thematique.deleteMany();
    await Categorie.deleteMany();
    await Produit.deleteMany();
    //await User.deleteMany();

    console.log("ğŸ—‘ï¸ Collections vidÃ©es");

    // InsÃ©rer thÃ©matiques
const thematiques = await Thematique.insertMany([
  { nom: "Immobilier", image: "/images/thematique/immobilier.jpg", nbrFoisRecherchÃ©: 120 },
  { nom: "VÃ©hicules", image: "/images/thematique/vehicules.jpg", nbrFoisRecherchÃ©: 95 },
  { nom: "MultimÃ©dia", image:"/images/thematique/multimÃ©dia.jpg" , nbrFoisRecherchÃ©: 80 },
  { nom: "Maison", image:"/images/thematique/maison.jpg", nbrFoisRecherchÃ©: 60 },
  { nom: "Loisirs", image:"/images/thematique/loisirs.jpg", nbrFoisRecherchÃ©: 45 },
  { nom: "Mode", image:"/images/thematique/mode.jpg", nbrFoisRecherchÃ©: 70 },
  { nom: "Ã‰lectromÃ©nager", image:"/images/thematique/electromenager.jpg", nbrFoisRecherchÃ©: 55 },
  { nom: "Services", image:"/images/thematique/services.jpg", nbrFoisRecherchÃ©: 30 },
  { nom: "Animaux", image:"/images/thematique/animaux.jpg", nbrFoisRecherchÃ©: 20 },
  { nom: "Agriculture", image:"/images/thematique/agriculture.jpg", nbrFoisRecherchÃ©: 15 },
  { nom: "Industrie", image:"/images/thematique/industrie.jpg", nbrFoisRecherchÃ©: 10 },
  { nom: "Musique", image:"/images/thematique/musique.jpg", nbrFoisRecherchÃ©: 50 },
  { nom: "Sport", image:"/images/thematique/sport.jpg", nbrFoisRecherchÃ©: 40 },
  { nom: "Outillage", image:"/images/thematique/outillage.jpg", nbrFoisRecherchÃ©: 28 },
  { nom: "SÃ©curitÃ©", image:"/images/thematique/securite.jpg", nbrFoisRecherchÃ©: 5 },
]);

console.log("âœ… ThÃ©matiques insÃ©rÃ©es");

// InsÃ©rer catÃ©gories
const categories = await Categorie.insertMany([
  // Immobilier
  { nom: "Appartements", image: "/images/categories/appartements.jpg", id_thematique: thematiques[0]._id },
  { nom: "Maisons", image: "/images/categories/maisons.jpg", id_thematique: thematiques[0]._id },
  { nom: "Terrains", image: "/images/categories/terrains.jpg", id_thematique: thematiques[0]._id },

  // VÃ©hicules
  { nom: "Voitures", image: "/images/categories/voitures.jpg", id_thematique: thematiques[1]._id },
  { nom: "Motos", image: "/images/categories/motos.jpg", id_thematique: thematiques[1]._id },
  { nom: "VÃ©los", image: "/images/categories/velos.jpg", id_thematique: thematiques[1]._id },

  // MultimÃ©dia
  { nom: "Informatique", image: "/images/categories/informatique.jpg", id_thematique: thematiques[2]._id },
  { nom: "TÃ©lÃ©phonie", image: "/images/categories/telephonie.jpg", id_thematique: thematiques[2]._id },
  { nom: "Gaming", image: "/images/categories/gaming.jpg", id_thematique: thematiques[2]._id },
  { nom: "Photo & VidÃ©o", image: "/images/categories/photo-video.jpg", id_thematique: thematiques[2]._id },

  // Maison
  { nom: "Meubles", image: "/images/categories/meubles.jpg", id_thematique: thematiques[3]._id },
  { nom: "DÃ©coration", image: "/images/categories/decoration.jpg", id_thematique: thematiques[3]._id },
  { nom: "Jardinage", image: "/images/categories/jardinage.jpg", id_thematique: thematiques[3]._id },

  // Loisirs
  { nom: "Sport", image: "/images/categories/sport.jpg", id_thematique: thematiques[4]._id },
  { nom: "Musique", image: "/images/categories/musique.jpg", id_thematique: thematiques[4]._id },
  { nom: "Livres", image: "/images/categories/livres.jpg", id_thematique: thematiques[4]._id },

  // Mode
  { nom: "VÃªtements", image: "/images/categories/vetements.jpg", id_thematique: thematiques[5]._id },
  { nom: "Chaussures", image: "/images/categories/chaussures.jpg", id_thematique: thematiques[5]._id },
  { nom: "Accessoires", image: "/images/categories/accessoires.jpg", id_thematique: thematiques[5]._id },

  // Ã‰lectromÃ©nager
  { nom: "Cuisine", image: "/images/categories/cuisine.jpg", id_thematique: thematiques[6]._id },
  { nom: "Lavage", image: "/images/categories/lavage.jpg", id_thematique: thematiques[6]._id },
  { nom: "Climatisation", image: "/images/categories/climatisation.jpg", id_thematique: thematiques[6]._id },

  // Services
  { nom: "Cours particuliers", image: "/images/categories/cours-particuliers.jpg", id_thematique: thematiques[7]._id },
  { nom: "DÃ©pannage", image: "/images/categories/depannage.jpg", id_thematique: thematiques[7]._id },
  { nom: "Ã‰vÃ©nementiel", image: "/images/categories/evenementiel.jpg", id_thematique: thematiques[7]._id },

  // Animaux
  { nom: "Chiens", image: "/images/categories/chiens.jpg", id_thematique: thematiques[8]._id },
  { nom: "Chats", image: "/images/categories/chats.jpg", id_thematique: thematiques[8]._id },
  { nom: "Accessoires animaux", image: "/images/categories/accessoires-animaux.jpg", id_thematique: thematiques[8]._id },

  // Agriculture
  { nom: "MatÃ©riel agricole", image: "/images/categories/materiel-agricole.jpg", id_thematique: thematiques[9]._id },
  { nom: "Animaux de ferme", image: "/images/categories/animaux-ferme.jpg", id_thematique: thematiques[9]._id },
  { nom: "Produits agricoles", image: "/images/categories/produits-agricoles.jpg", id_thematique: thematiques[9]._id },
  { nom: "VÃªtements agricoles", image: "/images/categories/vetements-agricoles.jpg", id_thematique: thematiques[9]._id },
  { nom: "Jardinage", image: "/images/categories/jardinage-agricole.jpg", id_thematique: thematiques[9]._id },
  
  // Industrie
  { nom: "MatÃ©riel industriel", image: "/images/categories/materiel-industriel.jpg", id_thematique: thematiques[10]._id },
  { nom: "Fournitures industrielles", image: "/images/categories/fournitures-industrielles.jpg", id_thematique: thematiques[10]._id },
  { nom: "VÃªtements de travail", image: "/images/categories/vetements-travail.jpg", id_thematique: thematiques[10]._id },
  { nom: "SÃ©curitÃ©", image: "/images/categories/securite.jpg", id_thematique: thematiques[10]._id },

  // Musique
  { nom: "Instruments de musique", image: "/images/categories/instruments-musique.jpg", id_thematique: thematiques[11]._id },
  { nom: "Ã‰quipement audio", image: "/images/categories/equipement-audio.jpg", id_thematique: thematiques[11]._id },
  { nom: "Partitions", image: "/images/categories/partitions.jpg", id_thematique: thematiques[11]._id },
  { nom: "Accessoires musique", image: "/images/categories/accessoires-musique.jpg", id_thematique: thematiques[11]._id },
  { nom: "appareils DJ", image: "/images/categories/appareils-dj.jpg", id_thematique: thematiques[11]._id },

  // Sport
  { nom: "Ã‰quipement sportif", image: "/images/categories/equipement-sportif.jpg", id_thematique: thematiques[12]._id },
  { nom: "VÃªtements de sport", image: "/images/categories/vetements-sport.jpg", id_thematique: thematiques[12]._id },
  { nom: "Chaussures de sport", image: "/images/categories/chaussures-sport.jpg", id_thematique: thematiques[12]._id },
  { nom: "Accessoires sport", image: "/images/categories/accessoires-sport.jpg", id_thematique: thematiques[12]._id },

  // Outillage
  { nom: "Outils manuels", image: "/images/categories/outils-manuels.jpg", id_thematique: thematiques[13]._id },
  { nom: "Outils Ã©lectriques", image: "/images/categories/outils-electriques.jpg", id_thematique: thematiques[13]._id },
  { nom: "Ã‰quipement de sÃ©curitÃ©", image: "/images/categories/equipement-securite-outillage.jpg", id_thematique: thematiques[13]._id },
  { nom: "Accessoires outillage", image: "/images/categories/accessoires-outillage.jpg", id_thematique: thematiques[13]._id },
]);

console.log("âœ… CatÃ©gories insÃ©rÃ©es");


    // InsÃ©rer produits
const produits = await Produit.insertMany([
  {
    titre: "MacBook Pro 2022",
    description: "Ordinateur portable puissant pour dÃ©veloppeurs",
    prix: 1800,
    location: "Paris",
    state: "occasion",
    sellerType: "professionnel",
    images: ["/images/produits/macbook.jpg"], // tableau d'images
    id_categorie: categories.find(cat => cat.nom === "Informatique")._id,
    theme: thematiques.find(t => t.nom === "MultimÃ©dia").nom,
    vues: 120,
    date: new Date("2023-11-01"),
  },
  {
    titre: "Voiture Peugeot 208",
    description: "Bonne occasion, faible kilomÃ©trage",
    prix: 9500,
    location: "Lyon",
    state: "occasion",
    sellerType: "particulier",
    images: ["/images/produits/peugeot208.jpg"], // tableau d'images
    id_categorie: categories.find(cat => cat.nom === "Voitures")._id,
    theme: thematiques.find(t => t.nom === "VÃ©hicules").nom,
    vues: 300,
    date: new Date("2023-10-25"),
  },
  {
    titre: "CanapÃ© 3 places",
    description: "Confortable et moderne, parfait pour salon",
    prix: 300,
    location: "Marseille",
    state: "occasion",
    sellerType: "particulier",
    images: ["/images/produits/canape.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Meubles")._id,
    theme: thematiques.find(t => t.nom === "Immobilier").nom,
    vues: 85,
    date: new Date("2023-10-20"),
  },
  {
    titre: "iPhone 14 Pro Max",
    description: "Smartphone Apple derniÃ¨re gÃ©nÃ©ration, Ã©tat impeccable",
    prix: 1200,
    location: "Bordeaux",
    state: "neuf",
    sellerType: "professionnel",
    images: ["/images/produits/iphone14.jpg"],
    id_categorie: categories.find(cat => cat.nom === "TÃ©lÃ©phonie")._id,
    theme: thematiques.find(t => t.nom === "MultimÃ©dia").nom,
    vues: 450,
    date: new Date("2023-11-05"),
  },
  {
    titre: "VÃ©lo Ã©lectrique Decathlon",
    description: "IdÃ©al pour trajets urbains, autonomie 80km",
    prix: 800,
    location: "Toulouse",
    state: "occasion",
    sellerType: "particulier",
    images: ["/images/produits/velo.jpg"],
    id_categorie: categories.find(cat => cat.nom === "VÃ©los")._id,
    theme: thematiques.find(t => t.nom === "VÃ©hicules").nom,
    vues: 210,
    date: new Date("2023-09-18"),
  },
  {
    titre: "Table en bois massif",
    description: "Table Ã  manger 6 personnes, style moderne",
    prix: 450,
    location: "Nice",
    state: "occasion",
    sellerType: "particulier",
    images: ["/images/produits/table.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Meubles")._id,
    theme: thematiques.find(t => t.nom === "Maison").nom,
    vues: 60,
    date: new Date("2023-09-10"),
  },
  {
    titre: "PS5 + 2 manettes",
    description: "Console Sony PlayStation 5 avec 2 manettes et 3 jeux",
    prix: 650,
    location: "Paris",
    state: "occasion",
    sellerType: "particulier",
    images: ["/images/produits/ps5.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Gaming")._id,
    theme: thematiques.find(t => t.nom === "MultimÃ©dia").nom,
    vues: 780,
    date: new Date("2023-11-08"),
  },
  {
    titre: "Appareil photo Canon EOS R",
    description: "Appareil photo hybride professionnel avec objectif 24-105mm",
    prix: 2100,
    location: "Lille",
    state: "neuf",
    sellerType: "professionnel",
    images: ["/images/produits/canon.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Photo & VidÃ©o")._id,
    theme: thematiques.find(t => t.nom === "MultimÃ©dia").nom,
    vues: 150,
    date: new Date("2023-08-22"),
  },
  {
    titre: "Chaussures Nike Air Max",
    description: "Sneakers tendance, taille 42, Ã©tat neuf",
    prix: 120,
    location: "Strasbourg",
    state: "neuf",
    sellerType: "particulier",
    images: ["/images/produits/nike.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Chaussures")._id,
    theme: thematiques.find(t => t.nom === "Mode").nom,
    vues: 95,
    date: new Date("2023-11-03"),
  },
  {
    titre: "Livre : Lâ€™art de la guerre",
    description: "Ã‰dition reliÃ©e, excellent Ã©tat",
    prix: 15,
    location: "Rennes",
    state: "occasion",
    sellerType: "particulier",
    images: ["/images/produits/livre.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Livres")._id,
    theme: thematiques.find(t => t.nom === "Loisirs").nom,
    vues: 40,
    date: new Date("2023-07-30"),
  },
  {   titre: "Machine Ã  laver Samsung",
    description: "Machine Ã  laver 8kg, trÃ¨s bon Ã©tat",
    prix: 300,
    location: "Nantes",
    state: "occasion",
    sellerType: "particulier",
    images: ["/images/produits/lave-linge.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Lavage")._id,
    theme: thematiques.find(t => t.nom === "Ã‰lectromÃ©nager").nom,
    vues: 75,
    date: new Date("2023-10-15"),
  },
  {
    titre: "Guitare acoustique Yamaha",
    description: "Guitare pour dÃ©butants, son clair et agrÃ©able",
    prix: 150,
    location: "Montpellier",
    state: "occasion",
    sellerType: "particulier",
    images: ["/images/produits/guitare.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Instruments de musique")._id,
    theme: thematiques.find(t => t.nom === "Musique").nom,
    vues: 110,
    date: new Date("2023-09-05"),
  },
  {    titre: "Tondeuse Ã  gazon Ã©lectrique",
    description: "Tondeuse lÃ©gÃ¨re, idÃ©ale pour petits jardins",
    prix: 200,
    location: "Dijon",
    state: "neuf",
    sellerType: "professionnel",
    images: ["/images/produits/tondeuse.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Jardinage")._id,
    theme: thematiques.find(t => t.nom === "Maison").nom,
    vues: 55,
    date: new Date("2023-08-12"),
  },
  {    titre: "Montre connectÃ©e Fitbit",
    description: "Suivi dâ€™activitÃ©, frÃ©quence cardiaque, GPS intÃ©grÃ©",
    prix: 130,
    location: "Angers",
    state: "neuf",
    sellerType: "particulier",
    images: ["/images/produits/fitbit.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Accessoires")._id,
    theme: thematiques.find(t => t.nom === "Mode").nom,
    vues: 200,
    date: new Date("2023-11-06"),
  },
  {    titre: "Casque audio Bose",
    description: "Casque Ã  rÃ©duction de bruit, son immersif",
    prix: 250,
    location: "Grenoble",
    state: "neuf",
    sellerType: "professionnel",
    images: ["/images/produits/bose.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Ã‰quipement audio")._id,
    theme: thematiques.find(t => t.nom === "Musique").nom,
    vues: 180,
    date: new Date("2023-10-28"),
  },
  {    titre: "Tapis de yoga antidÃ©rapant",
    description: "Tapis Ã©pais et confortable, idÃ©al pour le yoga et le pilates",
    prix: 40,
    location: "Tours",
    state: "neuf",
    sellerType: "particulier",
    images: ["/images/produits/tapis-yoga.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Ã‰quipement sportif")._id,
    theme: thematiques.find(t => t.nom === "Sport").nom,
    vues: 90,
    date: new Date("2023-09-22"),
  },
  {    titre: "Perceuse sans fil Bosch",
    description: "Perceuse 18V avec batterie et chargeur, idÃ©ale pour bricolage",
    prix: 120,
    location: "Le Havre",
    state: "neuf",
    sellerType: "professionnel",
    images: ["/images/produits/perceuse.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Outils Ã©lectriques")._id,
    theme: thematiques.find(t => t.nom === "Outillage").nom,
    vues: 65,
    date: new Date("2023-10-10"),
  },
  {    titre: "Accessoires pour animaux",
    description: "Lot de jouets et accessoires pour chiens et chats",
    prix: 35,
    location: "NÃ®mes",
    state: "neuf",
    sellerType: "particulier",
    images: ["/images/produits/accessoires-animaux.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Accessoires animaux")._id,
    theme: thematiques.find(t => t.nom === "Animaux").nom,
    vues: 40,
    date: new Date("2023-08-30"),
  },
  {    titre: "Tracteur agricole John Deere",
    description: "Tracteur 4 roues motrices, parfait pour travaux agricoles",
    prix: 15000,
    location: "Clermont-Ferrand",
    state: "occasion",
    sellerType: "professionnel",
    images: ["/images/produits/tracteur.jpg"],
    id_categorie: categories.find(cat => cat.nom === "MatÃ©riel agricole")._id,
    theme: thematiques.find(t => t.nom === "Agriculture").nom,
    vues: 25,
    date: new Date("2023-07-15"),
  },
  {    titre: "Ã‰quipement de sÃ©curitÃ© industriel",
    description: "Casques, gants et lunettes de protection pour chantier",
    prix: 300,
    location: "Le Mans",
    state: "neuf",
    sellerType: "professionnel",
    images: ["/images/produits/equipement-securite.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Ã‰quipement de sÃ©curitÃ©")._id,
    theme: thematiques.find(t => t.nom === "Industrie").nom,
    vues: 15,
    date: new Date("2023-09-12"),
  },
  {   titre: "peugeot 3008",
    description: "SUV familial, faible kilomÃ©trage, trÃ¨s bon Ã©tat",
    prix: 22000,
    location: "Paris",
    state: "occasion",
    sellerType: "particulier",
    images: ["/images/produits/peugeot3008.jpg"], // tableau d'images
    id_categorie: categories.find(cat => cat.nom === "Voitures")._id,
    theme: thematiques.find(t => t.nom === "VÃ©hicules").nom,
    vues: 180,
    date: new Date("2023-10-30"),
  },
  {    titre: "Appartement T2 Ã  Lyon",
    description: "Appartement 2 piÃ¨ces, 45mÂ², proche transports et commerces",
    prix: 850,
    location: "Lyon",
    state: "neuf",
    sellerType: "professionnel",
    images: ["/images/produits/appartement.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Appartements")._id,
    theme: thematiques.find(t => t.nom === "Immobilier").nom,
    vues: 95,
    date: new Date("2023-11-02"),
  }, 
  {    titre: "Samsung Galaxy S23 Ultra",
    description: "Smartphone Android haut de gamme, Ã©cran 6.8\", 256GB",
    prix: 1150,
    location: "Bordeaux",
    state: "neuf",
    sellerType: "professionnel",
    images: ["/images/produits/galaxy-s23.jpg"],
    id_categorie: categories.find(cat => cat.nom === "TÃ©lÃ©phonie")._id,
    theme: thematiques.find(t => t.nom === "MultimÃ©dia").nom,
    vues: 320,
    date: new Date("2023-11-07"),
  },
  {    titre: "VÃ©lo de route Cannondale",
    description: "VÃ©lo lÃ©ger en carbone, parfait pour la compÃ©tition",
    prix: 900,
    location: "Toulouse",
    state: "occasion",
    sellerType: "particulier",
    images: ["/images/produits/cannondale.jpg"],
    id_categorie: categories.find(cat => cat.nom === "VÃ©los")._id,
    theme: thematiques.find(t => t.nom === "VÃ©hicules").nom,
    vues: 140,
    date: new Date("2023-10-18"),
  },
  {    titre: "Enceinte Bluetooth JBL",
    description: "Enceinte portable avec son puissant et Ã©tanche",
    prix: 80,
    location: "Lille",
    state: "neuf",
    sellerType: "particulier",
    images: ["/images/produits/jbl.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Ã‰quipement audio")._id,
    theme: thematiques.find(t => t.nom === "Musique").nom,
    vues: 220,
    date: new Date("2023-10-29"),
  },
  {    titre: "Veste en cuir homme",
    description: "Veste en cuir vÃ©ritable, taille M, style biker",
    prix: 200,
    location: "Strasbourg",
    state: "occasion",
    sellerType: "particulier",
    images: ["/images/produits/veste-cuir.jpg"],
    id_categorie: categories.find(cat => cat.nom === "VÃªtements")._id,
    theme: thematiques.find(t => t.nom === "Mode").nom,
    vues: 75,
    date: new Date("2023-09-25"),
  },
  {    titre: "Montre Seiko automatique",
    description: "Montre de luxe avec mouvement automatique, Ã©tat neuf",
    prix: 350,
    location: "Rennes",
    state: "neuf",
    sellerType: "particulier",
    images: ["/images/produits/montre-seiko.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Accessoires")._id,
    theme: thematiques.find(t => t.nom === "Mode").nom,
    vues: 60,
    date: new Date("2023-10-05"),
  }, 
  {    titre: "Tablette iPad Air",
    description: "Tablette Apple iPad Air 10.9\", 64GB, Wi-Fi",
    prix: 600,
    location: "Nantes",
    state: "neuf",
    sellerType: "professionnel",
    images: ["/images/produits/ipad-air.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Informatique")._id,
    theme: thematiques.find(t => t.nom === "MultimÃ©dia").nom,
    vues: 280,
    date: new Date("2023-11-04"),
  }, 
  {    titre: "Chaise de bureau ergonomique",
    description: "Chaise avec support lombaire, rÃ©glable en hauteur",
    prix: 150,
    location: "Montpellier",
    state: "neuf",
    sellerType: "particulier",
    images: ["/images/produits/chaise-bureau.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Meubles")._id,
    theme: thematiques.find(t => t.nom === "Maison").nom,
    vues: 45,
    date: new Date("2023-09-15"),
  },
  {    titre: "Xbox Series X",
    description: "Console de jeu derniÃ¨re gÃ©nÃ©ration avec 1TB de stockage",
    prix: 500,
    location: "Dijon",
    state: "neuf",
    sellerType: "professionnel",
    images: ["/images/produits/xbox.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Gaming")._id,
    theme: thematiques.find(t => t.nom === "MultimÃ©dia").nom,
    vues: 400,
    date: new Date("2023-10-27"),
  },
  {    titre: "Drone DJI Mini 2",
    description: "Drone compact avec camÃ©ra 4K, idÃ©al pour dÃ©butants",
    prix: 450,
    location: "Le Havre",
    state: "neuf",
    sellerType: "professionnel",
    images: ["/images/produits/drone.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Photo & VidÃ©o")._id,
    theme: thematiques.find(t => t.nom === "MultimÃ©dia").nom,
    vues: 130,
    date: new Date("2023-10-12"),
  },
  {    titre: "Robe de soirÃ©e",
    description: "Robe Ã©lÃ©gante taille S, parfaite pour Ã©vÃ©nements",
    prix: 80,
    location: "NÃ®mes",
    state: "neuf",
    sellerType: "particulier",
    images: ["/images/produits/robe-soiree.jpg"],
    id_categorie: categories.find(cat => cat.nom === "VÃªtements")._id,
    theme: thematiques.find(t => t.nom === "Mode").nom,
    vues: 55,
    date: new Date("2023-09-28"),
  },
  {    titre: "Climatiseur mobile",
    description: "Climatiseur 12000 BTU, idÃ©al pour piÃ¨ces jusquâ€™Ã  35mÂ²",
    prix: 350,
    location: "Clermont-Ferrand",
    state: "neuf",
    sellerType: "professionnel",
    images: ["/images/produits/climatiseur.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Climatisation")._id,
    theme: thematiques.find(t => t.nom === "Ã‰lectromÃ©nager").nom,
    vues: 70,
    date: new Date("2023-10-08"),
  },
  {    titre: "Accessoires de jardinage",
    description: "Lot dâ€™outils de jardinage pour amateurs et professionnels",
    prix: 60,
    location: "Le Mans",
    state: "neuf",
    sellerType: "particulier",
    images: ["/images/produits/outils-jardinage.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Jardinage")._id,
    theme: thematiques.find(t => t.nom === "Maison").nom,
    vues: 35,
    date: new Date("2023-09-18"),
  },
  {    titre: "Accessoires DJ",
    description: "Mixeur, platines et casque pour DJ professionnels",
    prix: 800,
    location: "Angers",
    state: "occasion",
    sellerType: "professionnel",
    images: ["/images/produits/accessoires-dj.jpg"],
    id_categorie: categories.find(cat => cat.nom === "appareils DJ")._id,
    theme: thematiques.find(t => t.nom === "Musique").nom,
    vues: 20,
    date: new Date("2023-08-25"),
  },
  {    titre: "Ballon de football Adidas",
    description: "Ballon officiel de la Ligue des Champions, taille 5",
    prix: 30,
    location: "Tours",
    state: "neuf",
    sellerType: "particulier",
    images: ["/images/produits/ballon-foot.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Accessoires sport")._id,
    theme: thematiques.find(t => t.nom === "Sport").nom,
    vues: 85,
    date: new Date("2023-09-20"),
  },
  {  titre: "Coffret dâ€™outils manuels",
    description: "Coffret complet avec tournevis, clÃ©s et marteau",
    prix: 70,
    location: "Le Havre",
    state: "neuf",
    sellerType: "particulier",
    images: ["/images/produits/coffret-outils.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Outils manuels")._id,
    theme: thematiques.find(t => t.nom === "Outillage").nom,
    vues: 50,
    date: new Date("2023-10-14"),
  },
  {   titre: "Tesla Model 3",
    description: "Voiture Ã©lectrique, autonomie 400km, Ã©tat neuf",
    prix: 35000,
    location: "Paris",
    state: "neuf",
    sellerType: "professionnel",
    images: ["/images/produits/tesla.jpg"], // tableau d'images
    id_categorie: categories.find(cat => cat.nom === "Voitures")._id,
    theme: thematiques.find(t => t.nom === "VÃ©hicules").nom,
    vues: 220,
    date: new Date("2023-11-09"),
  },
  {    titre: "Maison T4 Ã  Marseille",
    description: "Maison 4 piÃ¨ces, 120mÂ², jardin et garage",
    prix: 250000,
    location: "Marseille",
    state: "occasion",
    sellerType: "professionnel",
    images: ["/images/produits/maison.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Maisons")._id,
    theme: thematiques.find(t => t.nom === "Immobilier").nom,
    vues: 130,
    date: new Date("2023-10-22"),
  },
  {    titre: "Surface Laptop 4",
    description: "Ordinateur portable Microsoft, Ã©cran 13.5\", 256GB",
    prix: 1400,
    location: "Lyon",
    state: "neuf",
    sellerType: "professionnel",
    images: ["/images/produits/surface.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Informatique")._id,
    theme: thematiques.find(t => t.nom === "MultimÃ©dia").nom,
    vues: 160,
    date: new Date("2023-11-01"),
  }, 
  {    titre: "VÃ©lo VTT Specialized",
    description: "VÃ©lo tout-terrain, cadre en aluminium, 21 vitesses",
    prix: 750,
    location: "Toulouse",
    state: "occasion",
    sellerType: "particulier",
    images: ["/images/produits/vtt.jpg"],
    id_categorie: categories.find(cat => cat.nom === "VÃ©los")._id,
    theme: thematiques.find(t => t.nom === "VÃ©hicules").nom,
    vues: 110,
    date: new Date("2023-10-16"),
  },
  {    titre: "Casque VR Oculus Quest 2",
    description: "Casque de rÃ©alitÃ© virtuelle autonome avec contrÃ´leurs",
    prix: 300,
    location: "Bordeaux",
    state: "neuf",
    sellerType: "professionnel",
    images: ["/images/produits/oculus.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Gaming")._id,
    theme: thematiques.find(t => t.nom === "MultimÃ©dia").nom,
    vues: 250,
    date: new Date("2023-10-30"),
  },
  {    titre: "Sac Ã  dos Eastpak",
    description: "Sac Ã  dos robuste, capacitÃ© 24L, idÃ©al pour lâ€™Ã©cole ou le travail",
    prix: 60,
    location: "Lille",
    state: "neuf",
    sellerType: "particulier",
    images: ["/images/produits/sac-dos.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Accessoires")._id,
    theme: thematiques.find(t => t.nom === "Mode").nom,
    vues: 80,
    date: new Date("2023-09-30"),
  },
  {    titre: "Objectif Canon 50mm f/1.8",
    description: "Objectif Ã  focale fixe, idÃ©al pour portraits et faible luminositÃ©",
    prix: 120,
    location: "Strasbourg",
    state: "neuf",
    sellerType: "particulier",
    images: ["/images/produits/objectif-canon.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Photo & VidÃ©o")._id,
    theme: thematiques.find(t => t.nom === "MultimÃ©dia").nom,
    vues: 140,
    date: new Date("2023-10-11"),
  },
  {    titre: "Short de sport Adidas",
    description: "Short lÃ©ger et respirant, taille M",
    prix: 25,
    location: "Rennes",
    state: "neuf",
    sellerType: "particulier",
    images: ["/images/produits/short-sport.jpg"],
    id_categorie: categories.find(cat => cat.nom === "VÃªtements de sport")._id,
    theme: thematiques.find(t => t.nom === "Sport").nom,
    vues: 70,
    date: new Date("2023-09-12"),
  },
  {    titre: "Scie circulaire Makita",
    description: "Scie puissante avec lame de 165mm, idÃ©ale pour le bois",
    prix: 180,
    location: "Nantes",
    state: "neuf",
    sellerType: "professionnel",
    images: ["/images/produits/scie-circulaire.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Outils Ã©lectriques")._id,
    theme: thematiques.find(t => t.nom === "Outillage").nom,
    vues: 40,
    date: new Date("2023-10-05"),
  },
  {    titre: "Aquarium 100L",
    description: "Aquarium complet avec filtre, Ã©clairage et dÃ©corations",
    prix: 150,
    location: "NÃ®mes",
    state: "occasion",
    sellerType: "particulier",
    images: ["/images/produits/aquarium.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Accessoires animaux")._id,
    theme: thematiques.find(t => t.nom === "Animaux").nom,
    vues: 30,
    date: new Date("2023-08-28"),
  },
  {    titre: "Moissonneuse-batteuse Claas",
    description: "Moissonneuse-batteuse performante pour grandes exploitations",
    prix: 75000,
    location: "Clermont-Ferrand",
    state: "occasion",
    sellerType: "professionnel",
    images: ["/images/produits/moissonneuse.jpg"],
    id_categorie: categories.find(cat => cat.nom === "MatÃ©riel agricole")._id,
    theme: thematiques.find(t => t.nom === "Agriculture").nom,
    vues: 10,
    date: new Date("2023-07-20"),
  },
  {    titre: "Gants de travail",
    description: "Gants rÃ©sistants pour travaux lourds, taille L",
    prix: 15,
    location: "Le Mans",
    state: "neuf",
    sellerType: "particulier",
    images: ["/images/produits/gants-travail.jpg"],
    id_categorie: categories.find(cat => cat.nom === "VÃªtements de travail")._id,
    theme: thematiques.find(t => t.nom === "Industrie").nom,
    vues: 20,
    date: new Date("2023-09-10"),
  },
  {    titre: "DÃ©tecteur de fumÃ©e",
    description: "DÃ©tecteur de fumÃ©e certifiÃ© NF, pile longue durÃ©e",
    prix: 25,
    location: "Angers",
    state: "neuf",
    sellerType: "particulier",
    images: ["/images/produits/detecteur-fumee.jpg"],
    id_categorie: categories.find(cat => cat.nom === "SÃ©curitÃ©")._id,
    theme: thematiques.find(t => t.nom === "SÃ©curitÃ©").nom,
    vues: 15,
    date: new Date("2023-10-01"),
  },
  {    titre: "Piano numÃ©rique Yamaha",
    description: "Piano 88 touches avec pÃ©dales, idÃ©al pour dÃ©butants et pros",
    prix: 600,
    location: "Tours",
    state: "occasion",
    sellerType: "particulier",
    images: ["/images/produits/piano.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Instruments de musique")._id,
    theme: thematiques.find(t => t.nom === "Musique").nom,
    vues: 90,
    date: new Date("2023-09-08"),
  },
  {    titre: "Tapis de course",
    description: "Tapis de course pliable avec plusieurs programmes dâ€™entraÃ®nement",
    prix: 400,
    location: "Le Havre",
    state: "neuf",
    sellerType: "professionnel",
    images: ["/images/produits/tapis-course.jpg"],
    id_categorie: categories.find(cat => cat.nom === "Ã‰quipement sportif")._id,
    theme: thematiques.find(t => t.nom === "Sport").nom,
    vues: 60,
    date: new Date("2023-10-20"),
  },
]);

    console.log("âœ… Produits insÃ©rÃ©s");

   // InsÃ©rer publicitÃ©s
await Publicite.insertMany([
  {
    titre: "ğŸ”¥ Promo Ã‰tÃ©",
    information: "Profitez de l'Ã©tÃ© pour Ã©quiper votre maison ! Jusqu'Ã  -50% sur une sÃ©lection d'appareils Ã©lectromÃ©nagers : rÃ©frigÃ©rateurs, lave-linge, aspirateurs et plus encore. Offres limitÃ©es, ne manquez pas cette vague de rÃ©ductions !",
    image: "/images/publicites/pub1.jpg"
  },
  {
    titre: "ğŸš— NouveautÃ©s Auto",
    information: "Explorez lâ€™avenir de la mobilitÃ© ! DÃ©couvrez les derniers modÃ¨les hybrides et 100% Ã©lectriques, alliant performance, design et Ã©conomies dâ€™Ã©nergie. Essais gratuits et offres de lancement disponibles chez nos partenaires.",
    image: "/images/publicites/pub2.jpg"
  },
  {
    titre: "ğŸ¡ Offres Immo",
    information: "Envie de changer de vie ? Trouvez votre futur chez-vous parmi nos appartements et maisons Ã  prix rÃ©duits partout en France. OpportunitÃ©s exclusives, frais de notaire offerts sur certaines ventes !",
    image: "/images/publicites/pub3.jpg"
  },
  {
    titre: "ğŸ’» Tech Deals",
    information: "Cette semaine seulement : smartphones derniÃ¨re gÃ©nÃ©ration, PC ultra-performants et gadgets connectÃ©s Ã  prix cassÃ©s ! Stock limitÃ©, livraison express et garantie incluse. Faites le plein de technologie !",
    image: "/images/publicites/pub4.jpg"
  },
  {
    titre: "ğŸ›‹ï¸ Mobilier Design",
    information: "Transformez votre intÃ©rieur avec notre sÃ©lection de meubles modernes et Ã©lÃ©gants. Promotions exceptionnelles et livraison gratuite partout en France. CanapÃ©s, tables, rangements : style et confort Ã  petit prix !",
    image: "/images/publicites/pub5.jpg"
  },
  {
    titre: "ğŸ‘— Mode & Accessoires",
    information: "Soyez tendance avec nos nouvelles collections printemps-Ã©tÃ© ! Robes lÃ©gÃ¨res, sacs stylÃ©s, lunettes de soleil et bien plus. Offres exclusives en ligne et en boutique. Lâ€™Ã©lÃ©gance nâ€™attend pas !",
    image: "/images/publicites/pub6.jpg"
  },
  {
    titre: "ğŸ€ Sport & Loisirs",
    information: "Bougez sans vous ruiner ! Ã‰quipements sportifs, accessoires de fitness, vÃ©los et jeux de plein air Ã  prix mini. IdÃ©al pour se remettre en forme ou sâ€™amuser en famille. Promotions valables jusquâ€™Ã  Ã©puisement des stocks.",
    image: "/images/publicites/pub7.jpg"
  },
  {
    titre: "âœˆï¸ Voyages",
    information: "Envie dâ€™Ã©vasion ? RÃ©servez vos sÃ©jours et billets dâ€™avion Ã  prix rÃ©duit vers les plus belles destinations. Plages paradisiaques, escapades urbaines ou nature sauvage : partez sans vous ruiner !",
    image: "/images/publicites/pub8.jpg"
  },
]);
  console.log("âœ… PublicitÃ©s insÃ©rÃ©es");

    // InsÃ©rer utilisateurs
  //   const users = [
  //   {
  //     name: "Admin",
  //     firstname: "Admin",
  //     phonenumber: "0600000001",
  //     email: "admin@admin.com",
  //     password: await hashPassword("admin"), 
  //     role: "admin",
  //     adresse: {
  //       rue: "10 Rue de Rivoli",
  //       ville: "Paris",
  //       codePostal: "75001",
  //       pays: "France",
  //     },
  //   },
  //   {
  //     name: "Moderator",
  //     firstname: "Moderator",
  //     phonenumber: "0600000002",
  //     email: "moderator@Moderator.com",
  //     password: await hashPassword("moderator"),
  //     role: "moderator",
  //     adresse: {
  //       rue: "15 Avenue Foch",
  //       ville: "Lyon",
  //       codePostal: "69000",
  //       pays: "France",
  //     },
  //   },
  //   {
  //     name: "Martin",
  //     firstname: "Lucas",
  //     phonenumber: "0600000003",
  //     email: "user@test.com",
  //     password: await hashPassword("user123"),
  //     role: "user",
  //     adresse: {
  //       rue: "20 Rue de la RÃ©publique",
  //       ville: "Marseille",
  //       codePostal: "13000",
  //       pays: "France",
  //     },
  //   },
  // ];

  //await User.insertMany(users);

 // console.log("âœ… Utilisateurs de test insÃ©rÃ©s avec succÃ¨s !");

    console.log("ğŸ‰ Base de donnÃ©es initialisÃ©e avec succÃ¨s !");
    process.exit();
  } catch (err) {
    console.error("âŒ Erreur seed :", err);
    process.exit(1);
  }
};

seedDatabase();
